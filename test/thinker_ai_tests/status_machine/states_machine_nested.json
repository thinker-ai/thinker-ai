{
  "definition_id": "outer_test_sm",
  "id": "outer_test_instance",
  "states": [
    {
      "name": "start",
      "actions": [
        {
          "name": "start_command"
        }
      ],
      "inner_state_machine": {
        "definition_id": "middle_test_sm",
        "id": "middle_test_instance",
        "states": [
          {
            "name": "middle_start",
            "actions": [
              {
                "name": "middle_start_command"
              }
            ],
            "inner_state_machine": {
              "definition_id": "inner_test_sm",
              "id": "inner_test_instance",
              "states": [
                {
                  "name": "inner_start",
                  "actions": [
                    {
                      "name": "inner_start_command"
                    }
                  ]
                },
                {
                  "name": "inner_end",
                  "actions": []
                }
              ],
              "transitions": [
                {
                  "event": "inner_start_command_handled",
                  "source": "inner_start",
                  "target": "inner_end"
                }
              ]
            },
            "to_inner_command_name_map": {
              "middle_start_command": "inner_start_command"
            },
            "from_inner_event_name_map": {
              "inner_start_command_handled": "middle_start_command_handled"
            }
          },
          {
            "name": "middle_composite",
            "actions": [
              {
                "name": "middle_composite_command"
              }
            ]
          },
          {
            "name": "middle_end",
            "actions": []
          }
        ],
        "transitions": [
          {
            "event": "middle_start_command_handled",
            "source": "middle_start",
            "target": "middle_composite"
          },
          {
            "event": "middle_composite_command_handled",
            "source": "middle_composite",
            "target": "middle_end"
          }
        ]
      },
      "to_inner_command_name_map": {
        "start_command": "middle_start_command"
      },
      "from_inner_event_name_map": {
        "middle_start_command_handled": "start_command_handled",
        "middle_composite_command_handled": "outer_composite_command_handled"
      }
    },
    {
      "name": "outer_composite",
      "actions": [
        {
          "name": "outer_composite_command"
        }
      ],
      "inner_state_machine": {
        "definition_id": "middle_test_sm",
        "id": "middle_test_instance",
        "states": [
          {
            "name": "middle_start",
            "actions": [
              {
                "name": "middle_start_command"
              }
            ],
            "inner_state_machine": {
              "definition_id": "inner_test_sm",
              "id": "inner_test_instance",
              "states": [
                {
                  "name": "inner_start",
                  "actions": [
                    {
                      "name": "inner_start_command"
                    }
                  ]
                },
                {
                  "name": "inner_end",
                  "actions": []
                }
              ],
              "transitions": [
                {
                  "event": "inner_start_command_handled",
                  "source": "inner_start",
                  "target": "inner_end"
                }
              ]
            },
            "to_inner_command_name_map": {
              "middle_start_command": "inner_start_command"
            },
            "from_inner_event_name_map": {
              "inner_start_command_handled": "middle_start_command_handled"
            }
          },
          {
            "name": "middle_composite",
            "actions": [
              {
                "name": "middle_composite_command"
              }
            ]
          },
          {
            "name": "middle_end",
            "actions": []
          }
        ],
        "transitions": [
          {
            "event": "middle_start_command_handled",
            "source": "middle_start",
            "target": "middle_composite"
          },
          {
            "event": "middle_composite_command_handled",
            "source": "middle_composite",
            "target": "middle_end"
          }
        ]
      },
      "to_inner_command_name_map": {
        "outer_composite_command": "middle_start_command"
      },
      "from_inner_event_name_map": {
        "middle_composite_command_handled": "outer_composite_command_handled"
      }
    },
    {
      "name": "end",
      "actions": []
    }
  ],
  "transitions": [
    {
      "event": "start_command_handled",
      "source": "start",
      "target": "outer_composite"
    },
    {
      "event": "outer_composite_command_handled",
      "source": "outer_composite",
      "target": "end"
    }
  ]
}
